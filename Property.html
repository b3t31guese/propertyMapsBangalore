<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8' />
    <title></title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.21.0/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.21.0/mapbox-gl.css' rel='stylesheet' />
    <style>
        body { margin:0; padding:0; }
        #map { position:absolute; top:0; bottom:0; width:100%; }
    </style>
</head>
<body>

<style>
#map {
    position: fixed;
    width:50%;
}
#features {
    width: 50%;
    margin-left: 50%;
    font-family: sans-serif;
    overflow-y: scroll;
    background-color: #fafafa;
}
section {
    padding:  25px 50px;
    line-height: 25px;
    border-bottom: 1px solid #ddd;
    opacity: 0.25;
    font-size: 13px;
}
section.active {
    opacity: 1;
}
section:last-child {
    border-bottom: none;
    margin-bottom: 200px;
}
</style>






<div id='map'></div>
<style type="text/css">
.tg  {border-collapse:collapse;border-spacing:0;}
.tg td{font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;}
.tg th{font-family:Arial, sans-serif;font-size:14px;font-weight:normal;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;}
.tg .tg-yw4l{vertical-align:top}
</style>


<script>


var chapters = {
    'Koramangala': {
        bearing: 27,
        center: [77.623008, 12.933108],
        zoom: 16.0,
        pitch: 20,
        old: 6825,
        new: 8850
    },
    'Indiranagar': {
        duration: 6000,
        center: [77.6404672,  12.9732913],
        bearing: 150,
        zoom: 16,
        pitch: 30,
        old: 6125,
        new: 8535
    },
    'Malleshwaram': {
        bearing: 80,
        center: [77.5703253, 13.0027353],
        zoom: 14.3,
        speed: 0.6,
        pitch: 120,
        old: 9450,
        new: 11590
    },

    'Frazer-Town': {
      bearing: 180,
      center: [77.6130165, 12.996845],
      zoom: 15.3,
      speed: 0.6,
      pitch: 70,
      old: 5800,
      new: 7385
    },

    'Vidyaranyapura': {
        duration: 6000,
        center: [77.5577315, 13.0766407],
        bearing: 150,
        zoom: 16,
        pitch: 30,
        old: 2350,
        new: 3595
      },
      'Uttarahalli': {
          duration: 6000,
          center: [77.5455438, 12.9055682],
          bearing: 120,
          zoom: 16,
          pitch: 100,
          old: 3025,
          new: 3895
        },
        'Kengeri': {
            duration: 6000,
            center: [77.4861595, 12.9173573],
            bearing: 360,
            zoom: 14.3,
            pitch: 150,
            old: 3100,
            new: 3605
          },
          'Rajarajeshwari-Nagar': {
              duration: 6000,
              center: [77.5153722, 12.9274278],
              bearing: 150,
              zoom: 16,
              pitch: 30,
              old: 3225,
              new: 3945
            },
            'Yelahanka': {
                duration: 6000,
                center: [77.5963454, 13.1006982],
                bearing: 300,
                zoom: 14.3,
                pitch: 70,
                old: 3225,
                new: 4700
              },
              'KR-Garden': {
                  duration: 6000,
                  center: [77.6565969, 12.9549208],
                  bearing: 140,
                  zoom: 16,
                  pitch: 65,
                  old: 3250,
                  new: 3455
                },
                'Kundalahalli': {
                    duration: 6000,
                    center: [77.7187843, 12.9684441],
                    bearing: 150,
                    zoom: 16,
                    pitch: 30,
                    old: 3300,
                    new: 4935
                  },
                  'Marathahalli': {
                      duration: 6000,
                      center: [77.6984163, 12.9552572],
                      bearing: 150,
                      zoom: 16,
                      pitch: 30,
                      old: 3325,
                      new: 5030
                    },
                    'Bellandur': {
                        duration: 6000,
                        center: [77.6770417, 12.9292114],
                        bearing: 250,
                        zoom: 16,
                        pitch: 75,
                        old: 3425,
                        new: 5470
                      },
                      'Kanaka-Nagar': {
                          duration: 6000,
                          center: [77.6082063, 13.0374105],
                          bearing: 0,
                          zoom: 16,
                          pitch: 750,
                          old: 3450,
                          new: 4925
                        },
                        'Thanisandra': {
                            duration: 6000,
                            center: [77.6339258, 13.054713],
                            bearing: 150,
                            zoom: 16,
                            pitch: 30,
                            old: 3550,
                            new: 5020
                          },
                          'Banaswadi': {
                              duration: 6000,
                              center: [77.6518539, 13.0141618],
                              bearing: 150,
                              zoom: 16,
                              pitch: 30,
                              old: 3575,
                              new: 4450
                            },
                            'Jakkur': {
                                duration: 6000,
                                center: [77.6068938, 13.0784743],
                                bearing: 210,
                                zoom: 16,
                                pitch: 120,
                                old: 3675,
                                new: 4595
                              },
                              'Kaggadasapura': {
                                  duration: 6000,
                                  center: [77.6790908, 12.9846713],
                                  bearing: 230,
                                  zoom: 16,
                                  pitch: 65,
                                  old: 3675,
                                  new: 3955
                                },
                                'Brookefields': {
                                    duration: 6000,
                                    center: [77.717936, 12.9652094],
                                    bearing: 240,
                                    zoom: 16,
                                    pitch: 50,
                                    old: 3700,
                                    new: 5625
                                  },
                                  'Varthur': {
                                      duration: 6000,
                                      center: [77.7469937, 12.9406152],
                                      bearing: 285,
                                      zoom: 16,
                                      pitch: 55,
                                      old: 3875,
                                      new: 3920
                                    },
                                    'Banashankari-1st-Stage': {
                                        duration: 6000,
                                        center: [77.5508062, 12.9401275],
                                        bearing: 150,
                                        zoom: 16,
                                        pitch: 30,
                                        old: 3993,
                                        new: 6345
                                      },
                                      'Jalahalli': {
                                          duration: 6000,
                                          center: [77.5703253, 13.0027353],
                                          bearing: 150,
                                          zoom: 16,
                                          pitch: 30,
                                          old: 4275,
                                          new: 5010
                                        },
                                        'HSR Layout': {
                                            duration: 6000,
                                            center: [77.5922609, 12.9664555],
                                            bearing: 150,
                                            zoom: 16,
                                            pitch: 30,
                                            old: 4425,
                                            new: 4845
                                          }
          };

</script>




<div id='features'>


<!-- test -->
<script>

for (j in chapters)
{
document.write("<section id="+j+" class='active'><h2>"+j+"</h2>"+"<p><table class='tg'><tr><th class='tg-yw4l'><h4>Values in 2012</h4></th><th class='tg-yw4l'><h4>Values in 2015</h4></th></tr><tr align = 'center'><td class='tg-yw4l' >"+chapters[j].old+"</td><td class='tg-yw4l'>"+chapters[j].new+"</td></tr></table></p></section>")

}
</script>
</div>

<script>
mapboxgl.accessToken = 'pk.eyJ1IjoicHJhc2hhbnRrdXJ1cCIsImEiOiJjaXE2Yms0MmQwMDdzZnNra2VzcHE1OTQ3In0.gxsfnSyKvnldYpA-Uhul0A';

var map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/prashantkurup/ciph8ab9a001rcvnfliqd7kee',
    center: [77.623008, 12.933108],
    zoom: 14.3,
     bearing: 27,
     pitch: 45
});





// On every scroll event, check which element is on screen
window.onscroll = function() {
    var chapterNames = Object.keys(chapters);
    for (var i = 0; i < chapterNames.length; i++) {
        var chapterName = chapterNames[i];
        if (isElementOnScreen(chapterName)) {
            setActiveChapter(chapterName);
            break;
        }
    }
};

var activeChapterName = 'Koramangala';
function setActiveChapter(chapterName) {
    if (chapterName === activeChapterName) return;

    map.flyTo(chapters[chapterName]);

    document.getElementById(chapterName).setAttribute('class', 'active');
    document.getElementById(activeChapterName).setAttribute('class', '');

    activeChapterName = chapterName;
}

function isElementOnScreen(id) {
    var element = document.getElementById(id);
    console.log(id)
    var bounds = element.getBoundingClientRect();
    return bounds.top < window.innerHeight && bounds.bottom > 0;
}

</script>

</body>
</html>
